<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMT Initial Dominance: Chiang's Fatal Strategy (1945–1946)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            position: relative;
        }
        
        /* Fixed background pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(0, 76, 153, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 102, 204, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        /* Custom colors matching the main page's NHD theme */
        .nhd-blue { background-color: #004c99; }
        .text-nhd-blue { color: #004c99; }
        .border-nhd-blue { border-color: #004c99; }
        .nhd-light-blue { background-color: #e6f0ff; }
        .nhd-gold { background-color: #ffc72c; }
        .hover\:bg-nhd-blue\/90:hover { background-color: rgba(0, 76, 153, 0.9); }

        .failure-box {
            border-left: 5px solid #dc2626;
            background-color: #fef2f2;
        }
        
        /* Enhanced card container */
        .card-container {
            background: linear-gradient(135deg, #ffffff 0%, #f8fbff 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 76, 153, 0.15);
            border-radius: 28px;
            box-shadow: 0 30px 70px rgba(0, 76, 153, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
            overflow: hidden;
        }
        
        .card-container::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(0, 76, 153, 0.06) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }
        
        /* Back button enhancement */
        .back-button {
            transition: all 0.3s ease;
            color: #004c99;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            padding: 0.75rem 1.25rem;
            border-radius: 12px;
            background: rgba(0, 76, 153, 0.05);
        }
        
        .back-button:hover {
            color: #0066cc;
            background: rgba(0, 76, 153, 0.12);
            transform: translateX(-6px);
            box-shadow: 0 4px 12px rgba(0, 76, 153, 0.15);
        }
        
        /* Heading styles */
        h1 {
            background: linear-gradient(135deg, #004c99 0%, #0066cc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
            font-size: 2rem;
            font-weight: 900;
            line-height: 1.2;
            position: relative;
            z-index: 1;
        }
        
        @media (min-width: 640px) {
            h1 { font-size: 2.5rem; }
        }
        
        @media (min-width: 768px) {
            h1 { font-size: 3rem; }
        }
        
        h2 {
            border-left: 5px solid #004c99;
            padding-left: 16px;
            transition: all 0.3s ease;
            font-size: 1.5rem;
            font-weight: 800;
            color: #1a3a52;
            margin-top: 2rem;
            margin-bottom: 1.5rem;
        }
        
        h2:hover {
            border-left-color: #0066cc;
            padding-left: 20px;
            transform: translateX(4px);
        }
        
        h3 {
            color: #004c99;
            font-weight: 700;
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }
        
        /* Content box styling */
        .content-box {
            background: linear-gradient(135deg, #e6f0ff 0%, #f0f7ff 100%);
            border: 2px solid rgba(0, 76, 153, 0.15);
            border-radius: 18px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .content-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.6s;
        }
        
        .content-box:hover::before {
            left: 100%;
        }
        
        .content-box:hover {
            border-color: rgba(0, 76, 153, 0.35);
            box-shadow: 0 15px 40px rgba(0, 76, 153, 0.15);
            transform: translateY(-4px);
        }
        
        /* List item styling */
        ul li {
            transition: all 0.2s ease;
            padding: 0.5rem 0;
            position: relative;
            padding-left: 0.5rem;
        }
        
        ul li:hover {
            color: #004c99;
            padding-left: 1rem;
        }
        
        ul li strong {
            color: #004c99;
            font-weight: 700;
        }
        
        /* Link styling */
        a {
            color: #004c99;
            text-decoration: none;
            transition: all 0.2s ease;
            position: relative;
        }
        
        a:hover {
            color: #0066cc;
        }
        
        a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #004c99, #0066cc);
            transition: width 0.3s ease;
        }
        
        a:hover::after {
            width: 100%;
        }
    </style>
</head>
<body class="min-h-screen py-8 sm:py-12 px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16">

    <div class="card-container bg-white p-8 sm:p-12 w-full max-w-6xl mx-auto">
        
        <a href="index.html" 
            class="back-button inline-flex items-center text-sm font-bold hover:text-blue-800 transition duration-150 group">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform duration-200">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
            </svg>
            Back to Timeline
        </a>

        <div class="mt-8 border-b-2 border-nhd-blue/20 pb-6">
            <h1 class="text-4xl sm:text-5xl font-extrabold leading-tight">KMT Initial Dominance: Chiang's Fatal Strategy (1945–1946)</h1>
            <p class="mt-3 text-gray-600 text-lg leading-relaxed">The Nationalists, with huge U.S. help, had all the military advantages at first. But problems inside their government and bad strategic choices set them up for collapse in the first two years.</p>
        </div>

        <div class="mt-10 space-y-8">
            <h2 class="text-2xl font-bold text-gray-800">Chiang's Focus on Positional Warfare</h2>
                

            <div class="content-box p-7 nhd-light-blue rounded-xl border border-nhd-blue/50">
                    <p class="text-gray-700 leading-relaxed mb-4">
                        <strong>Chiang Kai-shek's</strong> strategy relied on <strong>positional warfare</strong>—seizing and holding major urban centers, industrial zones, and critical rail lines. The aim was to force the smaller Communist forces into set-piece battles where KMT manpower and U.S.-supplied heavy weapons could dominate.
                    </p>
                    
                    <h3 class="text-lg font-semibold text-nhd-blue mb-2">The Critical Flaws</h3>
                    <ul class="list-disc pl-5 mt-4 text-gray-700 space-y-2">
                        <li><strong>Urban Fixation:</strong> While holding cities meant controlling wealth, it alienated the KMT from the <strong>rural peasantry</strong> (about 80% of the population), who became the CCP’s core base.</li>
                        <li><strong>Manchurian Overextension:</strong> Over <strong>300,000 elite troops</strong> were pushed deep into Manchuria, stretching supply lines and leaving them exposed to CCP mobile warfare and rail sabotage.</li>
                    </ul>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800">The Fragile Foundation and Internal Failures</h2>
                
            <div class="content-box p-7 bg-white rounded-xl border border-nhd-blue/30 space-y-4">
                    <div class="p-4 rounded-lg failure-box shadow-sm">
                        <h4 class="font-extrabold text-red-700 text-lg mb-1">Economic Collapse: Crazy Inflation</h4>
                        <p class="text-gray-800">
                            The Nationalists printed way too much money, which led to **out-of-control inflation**. This destroyed the savings of middle-class city people and workers with fixed salaries, turning their main supporters against the Nationalist government.
                        </p>
                    </div>

                    <div class="p-4 rounded-lg failure-box shadow-sm">
                        <h4 class="font-extrabold text-red-700 text-lg mb-1">Widespread Corruption</h4>
                        <p class="text-gray-800">
                            Corruption at high levels meant U.S. military and money help was often stolen or sold on the black market. This moral failure really hurt the morale of Nationalist troops and made people furious.
                        </p>
                    </div>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800">Massive U.S. Lift, Thin KMT Control</h2>
            <div class="content-box p-7 nhd-light-blue rounded-xl border border-nhd-blue/50 space-y-3">
                    <p class="text-gray-700 leading-relaxed">
                        From autumn 1945 through mid-1946, U.S. transport defined the Nationalists’ early advantage: more than <strong>500,000 KMT troops</strong> and heavy equipment were flown or shipped to North China and Manchuria. Yet lift speed outpaced political control—cities were occupied, but surrounding counties stayed CCP-aligned.
                    </p>
                    <ul class="list-disc pl-5 text-gray-700 space-y-2">
                        <li><strong>Operation BELEAGUER:</strong> U.S. aircraft and Navy vessels moved divisions into Beijing, Tianjin, Shanghai, and Manchurian ports, giving the KMT first arrival but shallow roots.</li>
                        <li><strong>Rail vulnerability:</strong> Once landed, Nationalist columns depended on fragile rail arteries (Jinzhou–Shenyang–Changchun). CCP partisans cut lines, forcing costly repairs and delaying offensives.</li>
                        <li><strong>Garrison drag:</strong> City garrisons locked elite units into static defense, reducing offensive mobility by early 1946.</li>
                    </ul>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800">Manchuria: Spread Too Thin and Supply Problems</h2>
            <div class="content-box p-7 bg-white rounded-xl border border-nhd-blue/30 space-y-3">
                    <p class="text-gray-700 leading-relaxed">
                        By late 1946, Nationalist forces held major Manchurian cities but were losing strength along railroad lines. Winter supply runs stopped working; fuel and ammunition shortages hurt their armored trains and artillery, while Communist units went around strongpoints to cut telegraph and rail lines.
                    </p>
                    <ul class="list-disc pl-5 text-gray-700 space-y-2">
                        <li><strong>Changchun & Shenyang struggling:</strong> Troops defending cities had to survive winter with low supplies; help arrived slowly, giving the Communists time to gather forces.</li>
                        <li><strong>Wrong tactics:</strong> Nationalist tactics of defending positions couldn't deal with Communist night raids and quick railroad-cutting operations.</li>
                        <li><strong>Constant wear-down:</strong> Every bridge they fixed got blown up again; by spring 1947, Nationalist railroad security units were worn out.</li>
                    </ul>
                </div>
            </div>

            <div class="space-y-4">
                <h2 class="text-xl font-bold text-gray-800 border-l-4 border-nhd-blue pl-3">Inflation, Conscription, and Desertion</h2>
                <div class="p-6 nhd-light-blue rounded-xl border border-nhd-blue/50 space-y-3">
                    <p class="text-gray-700 leading-relaxed">
                        Hyperinflation hollowed urban support while harsh conscription alienated the countryside. Soldiers’ pay lost value monthly; families of conscripts faced grain levies and seizures. Desertions rose, especially in Manchuria, eroding the KMT’s numerical edge.
                    </p>
                    <ul class="list-disc pl-5 text-gray-700 space-y-2">
                        <li><strong>Currency freefall:</strong> The fabi and later gold yuan depreciated rapidly, wiping out middle-class savings and officer pay.</li>
                        <li><strong>Forced levies:</strong> Rural grain requisitions fed garrisons but fueled peasant anger, driving recruits toward CCP lines.</li>
                        <li><strong>Morale spiral:</strong> Corruption and unpaid wages pushed units to sell equipment on black markets, further weakening combat readiness.</li>
                    </ul>
                </div>
            </div>

            <div class="space-y-4">
                <h2 class="text-xl font-bold text-gray-800 border-l-4 border-nhd-blue pl-3">Key Timeline: From Winning to Stuck</h2>
                <div class="p-6 bg-white rounded-xl border border-gray-200 space-y-2">
                    <ul class="list-disc pl-5 text-gray-700 space-y-2">
                        <li><strong>Aug–Oct 1945:</strong> Nationalist planes and ships take Beijing, Tianjin, Shanghai; Communists control countryside and small rail lines.</li>
                        <li><strong>Jan 10, 1946:</strong> Ceasefire and Political Consultative Conference agree to share power; fighting continues in Manchuria.</li>
                        <li><strong>Spring 1946:</strong> Nationalists push north along rail lines; Communist army avoids big battles, focuses on cutting supply lines.</li>
                        <li><strong>Summer–Fall 1946:</strong> Big fights in Manchuria; supply problems show up as Communist night raids and rail cuts increase.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div id="message-box" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden items-center justify-center p-4 z-50">
        <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full">
            <h3 class="text-xl font-bold text-nhd-blue mb-3">Notice</h3>
            <p id="message-content" class="text-gray-700"></p>
            <button class="mt-4 w-full nhd-blue text-white py-2 rounded-lg hover:bg-blue-800 transition" 
                        onclick="document.getElementById('message-box').classList.add('hidden'); document.getElementById('message-box').classList.remove('flex');">
                Close
            </button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db = null;
        let auth = null;

        // Initialize Firebase
        try {
            if (Object.keys(firebaseConfig).length > 0) {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
            } else {
                console.error("Firebase configuration is missing.");
            }
        } catch (e) {
            console.error("Error initializing Firebase:", e);
        }

        /**
         * Custom message box function to comply with the no-alert rule.
         */
        function showCustomMessage(message, title = 'Notice') {
            const msgBox = document.getElementById('message-box');
            document.querySelector('#message-box h3').textContent = title;
            document.getElementById('message-content').innerHTML = message;
            msgBox.classList.remove('hidden');
            msgBox.classList.add('flex');
        }

        /**
         * Handles user authentication using the provided token or anonymously.
         * @returns {string | null} The user ID if successful, otherwise null.
         */
        async function initializeAuth() {
            if (!auth) return null;
            try {
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }
                return auth.currentUser.uid;
            } catch (error) {
                console.error("Firebase Auth Error:", error);
                return null;
            }
        }

        /**
         * Saves the completion status of Part 2 to Firestore.
         */
        window.confirmCompletion = async function() {
            const confirmButton = document.getElementById('confirm-button');
            confirmButton.disabled = true;
            confirmButton.textContent = 'Saving Progress...';

            if (!db) {
                showCustomMessage("Database not configured. Cannot save progress.", "Error");
                confirmButton.disabled = false;
                confirmButton.textContent = 'Confirm Read of Part 2';
                return;
            }

            const userId = await initializeAuth();
            if (!userId) {
                showCustomMessage("Failed to authenticate user. Cannot save progress.", "Error");
                confirmButton.disabled = false;
                confirmButton.textContent = 'Confirm Read of Part 2';
                return;
            }

            // Path to store the completion status for Part 2 in the user's private space
            const docPath = `/artifacts/${appId}/users/${userId}/progress/part2_completed`;
            const progressRef = doc(db, docPath);

            try {
                await setDoc(progressRef, {
                    completed: true,
                    timestamp: new Date(),
                    part: 2
                });
                
                showCustomMessage(
                    'Your reading progress for **Part 2** has been saved. The next section on your Timeline is now unlocked!', 
                    'Part 2 Confirmed & Unlocked'
                );
                
                // Update button appearance to show success
                confirmButton.textContent = 'Part 2 Confirmed!';
                confirmButton.classList.remove('bg-gray-300', 'hover:bg-gray-400', 'text-gray-800');
                confirmButton.classList.add('bg-green-600', 'hover:bg-green-700', 'text-white');

            } catch (e) {
                console.error("Error writing document: ", e);
                showCustomMessage(`An error occurred while saving: ${e.message}`, "Database Error");
                confirmButton.disabled = false;
            }
        }
    </script>

</body>
</html>
